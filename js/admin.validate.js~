function modificar_admin (mycn) {
	$("#ui-dialog-title-dialog-admin").html("Modificar");	
	$.post('/includes/buscar_contacto_agenda.php', { cn: mycn }, function(datos) {
		datos = $.parseJSON(datos);
	/*	$('#modifica').val(mycn);
		$('#givenname').val(datos.givenname);
		$('#sn').val(datos.sn);
		$('#postaladdress').val(datos.postaladdress);
		$('#mobile').val(datos.mobile);
		$('#telephonenumber').val(datos.telephonenumber);
		$('#homephone').val(datos.homephone);
		$('#mail').val(datos.mail);
		$('#mail2').val(datos.mail2);	*/	
	});
	$( "#dialog-admin" ).dialog( "open" );
}

function borrar_admin (mycn) {
	$( "#dialog-delete-admin" ).data('mycn', mycn).dialog( "open" );
}


$(document).ready(function() {

	$( "#create-admin" ).click(function() {
		$("#ui-dialog-title-dialog-form").html("Crear");
		$( "#dialog-admin" ).dialog( "open" );
	});
	
	
	$( "#dialog-admin" ).dialog({
		autoOpen: false,
		height: 550,
		width: 350,
		modal: true,
		buttons: {
			"Continuar" : function() {
				$("#crear-admin").validate({
					rules: {
						nom: "required",
						cognoms: "required",
						mail: {
							required: true,
							email: true
						},
						contrasenia: "required",
						confirma: {
							equalTo: "#contrasenia"
						} 
					},
					messages: {
						nom: "<span class='mensajes'>El nombre es obligatorio.</span>",
						cognoms: "<span class='mensajes'>El apellido es obligatorio.</span>",
						mail: {
							required: "<span class='mensajes'>El email es obligatorio.</span>",
							email: "<span class='mensajes'>El email debe ser v√°lido.<span>"
						},
						contrasenia: "<span class='mensajes'>El password es obligatorio.</span>",
						confirma: "<span class='mensajes'>Los passwords deben ser iguales.</span>"
					}
				});
		
				if ( $("#crear-admin").valid() ) {
					var global_datos;
					$.post('/includes/crear_contacto_agenda.php', $("#contacto").serialize(), function(datos) {
						global_datos = datos;;
					});
					$('#cuerpo-admin').load('/cobrador/agenda.php',function() {
						$(".display-message").html(global_datos);
					});
					$("#cuerpo-admin").val("");	
					$( this ).dialog( "close" );
				}
			},
			"Cancelar": function() {
				$( this ).dialog( "close" );
			}
		},
		close: function() {
			$("#crear-admin").clearForm();
		}
	});
	
	$("#dialog-delete-admin").dialog({
		autoOpen: false,
		resizable: false,
		height: 150,
		modal: true,
		buttons: {
			"Si": function() {
				var global_datos;
				var cn = $(this).data('mycn');
				$.post('/includes/borrar_contacto_agenda.php', { cn: cn }, function(datos) {
						global_datos = datos;;
				});
				$('#cuerpo').load('/cobrador/agenda.php',function() {
					$(".display-message").html(global_datos);
				});	
				$( this ).dialog( "close" );
				
			},
			"No": function() {
				$( this ).dialog( "close" );
			}
		}
	});
});
